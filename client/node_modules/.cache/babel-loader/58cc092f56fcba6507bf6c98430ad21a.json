{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import EditTodo from\"./EditTodo\";var ListTodos=function ListTodos(){// State and what you are using to change the state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];// Delete function\nvar deleteTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var _deleteTodo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:_deleteTodo=_context.sent;setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));console.log(todos);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function deleteTodo(_x){return _ref.apply(this,arguments);};}();var getTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,jsonData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000/todos\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;// Set the state of todos on the client side to whatever was fetched during the first render\nsetTodos(jsonData);console.log(\"EXECUTED!!! GET\");_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function getTodos(){return _ref2.apply(this,arguments);};}();useEffect(function(){// every refresh render, execute these functions\ngetTodos();},[]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table mt-5 text-center\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"Edit\"),/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,todos.map(function(todo){return/*#__PURE__*/React.createElement(\"tr\",{key:todo.todo_id},/*#__PURE__*/React.createElement(\"td\",null,todo.description),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(EditTodo,{todo:todo})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id);}},\"Delete\")));}))));};export default ListTodos;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/components/ListTodos.js"],"names":["React","Fragment","useEffect","useState","EditTodo","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","filter","todo","todo_id","console","log","error","message","getTodos","response","json","jsonData","map","description"],"mappings":"uXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB;AADoB,cAEKF,QAAQ,CAAC,EAAD,CAFb,wCAEdG,KAFc,eAEPC,QAFO,eAIpB;AACA,GAAMC,CAAAA,UAAU,0FAAG,iBAAMC,EAAN,wKAEcC,CAAAA,KAAK,uCAAgCD,EAAhC,EAAsC,CAC/DE,MAAM,CAAE,QADuD,CAAtC,CAFnB,QAELH,WAFK,eAKXD,QAAQ,CAACD,KAAK,CAACM,MAAN,CAAa,SAAAC,IAAI,QACtBA,CAAAA,IAAI,CAACC,OAAL,GAAiBL,EADK,EAAjB,CAAD,CAAR,CAGAM,OAAO,CAACC,GAAR,CAAYV,KAAZ,EARW,+EAUXS,OAAO,CAACE,KAAR,CAAc,YAAIC,OAAlB,EAVW,oEAAH,kBAAVV,CAAAA,UAAU,4CAAhB,CAcA,GAAMW,CAAAA,QAAQ,2FAAG,sMAGcT,CAAAA,KAAK,CAAC,6BAAD,CAHnB,QAGHU,QAHG,uCAKcA,CAAAA,QAAQ,CAACC,IAAT,EALd,QAKHC,QALG,gBAMT;AACAf,QAAQ,CAACe,QAAD,CAAR,CACAP,OAAO,CAACC,GAAR,CAAY,iBAAZ,EARS,qFAUTD,OAAO,CAACE,KAAR,CAAc,aAAIC,OAAlB,EAVS,uEAAH,kBAARC,CAAAA,QAAQ,2CAAd,CAcAjB,SAAS,CAAC,UAAM,CACZ;AACAiB,QAAQ,GACX,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACI,oBAAC,QAAD,mBACI,6BAAO,SAAS,CAAC,wBAAjB,eACI,8CACI,2CACI,4CADJ,cAEI,qCAFJ,cAGI,uCAHJ,CADJ,CADJ,cAQI,iCACKb,KAAK,CAACiB,GAAN,CAAU,SAAAV,IAAI,qBACX,0BAAI,GAAG,CAAEA,IAAI,CAACC,OAAd,eACI,8BAAKD,IAAI,CAACW,WAAV,CADJ,cAEI,2CAAI,oBAAC,QAAD,EAAU,IAAI,CAAEX,IAAhB,EAAJ,CAFJ,cAGI,2CAAI,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,yBAAML,CAAAA,UAAU,CAACK,IAAI,CAACC,OAAN,CAAhB,EAA5C,WAAJ,CAHJ,CADW,EAAd,CADL,CARJ,CADJ,CADJ,CAsBH,CA5DD,CA8DA,cAAeT,CAAAA,SAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport EditTodo from \"./EditTodo\";\n\nconst ListTodos = () => {\n    // State and what you are using to change the state\n    const[todos, setTodos] = useState([]);\n\n    // Delete function\n    const deleteTodo = async(id) => {\n        try {\n            const deleteTodo = await fetch(`http://localhost:5000/todos/${id}`, {\n                 method: \"DELETE\"\n            });\n            setTodos(todos.filter(todo => \n                todo.todo_id !== id\n            ));\n            console.log(todos);\n        } catch(err) {\n            console.error(err.message);\n        }\n    }\n\n    const getTodos = async() => {\n        try {\n            // grab data from server, fetch is a get request\n            const response = await fetch(\"http://localhost:5000/todos\");\n            // Have to parse because receiving json data\n            const jsonData = await response.json();\n            // Set the state of todos on the client side to whatever was fetched during the first render\n            setTodos(jsonData);\n            console.log(\"EXECUTED!!! GET\");\n        } catch(err) {\n            console.error(err.message);\n        }\n    }\n\n    useEffect(() => {\n        // every refresh render, execute these functions\n        getTodos();\n    }, []);\n\n    return (\n        <Fragment>\n            <table className=\"table mt-5 text-center\">\n                <thead>\n                    <tr>\n                        <th>Description</th>\n                        <th>Edit</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {todos.map(todo => (\n                        <tr key={todo.todo_id}>\n                            <td>{todo.description}</td>\n                            <td><EditTodo todo={todo} /></td>\n                            <td><button className=\"btn btn-danger\" onClick={() => deleteTodo(todo.todo_id)}>Delete</button></td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </Fragment>\n    );\n}\n\nexport default ListTodos;"]},"metadata":{},"sourceType":"module"}