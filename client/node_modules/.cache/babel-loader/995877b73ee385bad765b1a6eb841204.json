{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import{Button,Col,Container,Form,Row}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import axios from\"axios\";import{UserContext}from\"../utils/UserProvider\";import ROUTES from\"../routes/Routes\";var Register=function Register(){var _useContext=useContext(UserContext),setContextUsername=_useContext.setUsername,setToken=_useContext.setToken;// Initialise input states of form\nvar _useState=useState({username:\"\",email:\"\",password:\"\",confirmPassword:\"\"}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var username=inputs.username,email=inputs.email,password=inputs.password,confirmPassword=inputs.confirmPassword;// When fields change, apply changes to input variables\nvar handleChange=function handleChange(event){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();body={username:username,email:email,password:password,confirmPassword:confirmPassword};axios.post(\"/api/auth/register\",body).then(function(response){var data=response.data;setContextUsername(data.username);setToken(data.token);toast.success(\"Thanks for joining us \"+data.username+\"!\");}).catch(function(error){toast.error(error.response.data.error);});console.log(\"Form submitted by \".concat(username,\", with \").concat(email));case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/ (//isAuthenticated ? <Redirect to={ROUTES.TODOLIST} />\nReact.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{className:\"my-5\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Register\"),/*#__PURE__*/React.createElement(Form,{className:\"mt-4 mb-3\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainTextName\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Username:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Username\",value:username,name:\"username\",onChange:handleChange}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainEmail\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Email:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"email@example.com\",value:email,name:\"email\",onChange:handleChange}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainPassword\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Password:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",value:password,name:\"password\",onChange:handleChange}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainPassword\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Confirm Password:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,name:\"confirmPassword\",onChange:handleChange}))),/*#__PURE__*/React.createElement(Button,{className:\"btn btn-primary\",type:\"submit\"},\"Register\")),/*#__PURE__*/React.createElement(\"p\",null,\"Already have an account? Sign in\\xA0\",/*#__PURE__*/React.createElement(Link,{to:ROUTES.LOGIN},\"here\")))));};export default Register;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Register.js"],"names":["React","useState","useContext","useEffect","Button","Col","Container","Form","Row","Link","toast","axios","UserContext","ROUTES","Register","setContextUsername","setUsername","setToken","username","email","password","confirmPassword","inputs","setInputs","handleChange","event","target","name","value","handleSubmit","preventDefault","body","post","then","response","data","token","success","catch","error","console","log","LOGIN"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Register = () => {\n    const { setUsername : setContextUsername, \n            setToken } = useContext(UserContext);\n\n    // Initialise input states of form\n    const [inputs, setInputs] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\"\n    });\n\n    const {\n        username,\n        email,\n        password,\n        confirmPassword\n    } = inputs;\n\n    // When fields change, apply changes to input variables\n    const handleChange = event => {\n        setInputs({\n            ...inputs,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    const handleSubmit = async event => {\n        event.preventDefault();\n\n        const body = {\n            username,\n            email,\n            password,\n            confirmPassword\n        };\n\n        axios.post(\"/api/auth/register\", body)\n            .then(response => {\n                const { data } = response;\n\n                setContextUsername(data.username);\n                setToken(data.token);\n                toast.success(\"Thanks for joining us \" + data.username + \"!\");\n            })\n            .catch(error => {\n                toast.error(error.response.data.error);\n            });\n\n        console.log(`Form submitted by ${username}, with ${email}`);\n    };\n\n    return (\n        //isAuthenticated ? <Redirect to={ROUTES.TODOLIST} />\n         <div>\n            <Container className=\"my-5\">\n                <h2>Register</h2>\n                <Form className=\"mt-4 mb-3\" onSubmit={handleSubmit}>\n                    <Form.Group as={Row} controlId=\"formPlainTextName\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Username:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"text\"\n                                placeholder=\"Username\"\n                                value={username}\n                                name=\"username\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainEmail\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Email:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"email\"\n                                placeholder=\"email@example.com\"\n                                value={email}\n                                name=\"email\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"password\"\n                                placeholder=\"Password\"\n                                value={password}\n                                name=\"password\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Confirm Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"password\"\n                                placeholder=\"Confirm Password\"\n                                value={confirmPassword}\n                                name=\"confirmPassword\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Button className=\"btn btn-primary\" type=\"submit\">\n                        Register\n                    </Button>\n                </Form>\n                <p>\n                    Already have an account? Sign in&nbsp;\n                    <Link to={ROUTES.LOGIN}>\n                        here\n                    </Link>\n                </p>\n            </Container>\n        </div>\n    );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}