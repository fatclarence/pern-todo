{"ast":null,"code":"var _jsxFileName = \"/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Login.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Login = () => {\n  // setContextUsername will change the state in the context (received from parent/ancestor component)\n  const {\n    username: contextUsername,\n    token,\n    setUsername: setContextUsername,\n    setToken\n  } = useContext(UserContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [auth, setAuth] = useState(null);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const body = {\n      username,\n      password\n    };\n    axios.post(\"/api/auth/login\", body).then(response => {\n      const {\n        data\n      } = response;\n      setToken(data.token);\n      setContextUsername(data.username);\n    }).catch(error => {\n      toast.error(error.response.data.error);\n    });\n    console.log(`Sign in form submitted by ${username}`);\n  };\n\n  useEffect(() => {\n    if (contextUsername && token) {\n      setAuth({\n        contextUsername,\n        token\n      });\n    }\n  }, [contextUsername, token]);\n\n  const isAuthenticated = () => auth != null;\n\n  return (\n    /*#__PURE__*/\n    // isAuthenticated ? <Redirect to={ROUTES.TODOLIST} /> \n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: \"my-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Form, {\n      className: \"mt-4 mb-3\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formPlainTextName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      className: \"text-right\",\n      column: true,\n      sm: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }, \"Username:\"), /*#__PURE__*/React.createElement(Col, {\n      sm: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Username\",\n      value: username,\n      onChane: e => setUsername(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formPlainPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      className: \"text-right\",\n      column: true,\n      sm: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"Password:\"), /*#__PURE__*/React.createElement(Col, {\n      sm: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"password\",\n      placeholder: \"Password\",\n      value: password,\n      onChane: e => setPassword(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(Button, {\n      class: \"btn btn-success\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, \"Sign In\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, \"Don't have an account? Register\\xA0\", /*#__PURE__*/React.createElement(Link, {\n      to: ROUTES.REGISTER,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, \"NOW!\"))))\n  );\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Login.js"],"names":["React","useState","useContext","useEffect","Button","Col","Container","Form","Row","Link","Redirect","toast","axios","UserContext","ROUTES","Login","username","contextUsername","token","setUsername","setContextUsername","setToken","password","setPassword","auth","setAuth","handleSubmit","event","preventDefault","body","post","then","response","data","catch","error","console","log","isAuthenticated","e","target","value","REGISTER"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Login = () => {\n    // setContextUsername will change the state in the context (received from parent/ancestor component)\n    const { username: contextUsername,\n            token,\n            setUsername : setContextUsername,\n            setToken } = useContext(UserContext);\n\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const [auth, setAuth] = useState(null);\n\n    const handleSubmit = async event => {\n        event.preventDefault();\n        const body = { username, password };\n        axios.post(\"/api/auth/login\", body)\n            .then(response => {\n                const { data } = response;\n                setToken(data.token);\n                setContextUsername(data.username);\n            })\n            .catch(error => {\n                toast.error(error.response.data.error);\n            });\n\n        console.log(`Sign in form submitted by ${username}`);\n    };\n\n    useEffect(() => {\n        if (contextUsername && token) {\n            setAuth({ contextUsername, token });\n        }\n    }, [contextUsername, token]);\n\n    const isAuthenticated = () => auth != null;\n\n    return (\n        // isAuthenticated ? <Redirect to={ROUTES.TODOLIST} /> \n        <div>\n            <Container className=\"my-5\">\n                <h2>Login</h2>\n                <Form className=\"mt-4 mb-3\" onSubmit={handleSubmit}>\n                    <Form.Group as={Row} controlId=\"formPlainTextName\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Username:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control\n                                type=\"text\"\n                                placeholder=\"Username\"\n                                value={username}\n                                onChane={e => setUsername(e.target.value)}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control\n                                type=\"password\"\n                                placeholder=\"Password\"\n                                value={password}\n                                onChane={e => setPassword(e.target.value)}\n                            />\n                        </Col>\n                    </Form.Group> \n\n                    <Button class=\"btn btn-success\" type=\"submit\">\n                        Sign In\n                    </Button>\n                </Form>\n                <p>\n                    Don't have an account? Register&nbsp;\n                    <Link to={ROUTES.REGISTER}>\n                        NOW!\n                    </Link>\n                </p>\n            </Container>\n        </div>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}