{"ast":null,"code":"var _jsxFileName = \"/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Register.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Register = () => {\n  const {\n    username: contextUsername,\n    token,\n    setUsername: setContextUsername,\n    setToken\n  } = useContext(UserContext); // Initialise input states of form\n\n  const [inputs, setInputs] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\"\n  }); // Authentication states\n\n  const [auth, setAuth] = useState(null);\n  const {\n    username,\n    email,\n    password,\n    confirmPassword\n  } = inputs; // When fields change, apply changes to input variables\n\n  const handleChange = event => {\n    setInputs({ ...inputs,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const body = {\n      username,\n      email,\n      password,\n      confirmPassword\n    };\n    axios.post(\"/api/auth/register\", body).then(response => {\n      const {\n        data\n      } = response;\n      setContextUsername(data.username);\n      setToken(data.token);\n    }).catch(error => {\n      toast.error(error.response.data.error);\n    });\n    console.log(`Form submitted by ${username}, with ${email}`);\n  }; // Authentication checks\n\n\n  useEffect(() => {\n    if (contextUsername && token) {\n      setAuth({\n        contextUsername,\n        token\n      });\n    }\n  }, [contextUsername, token]);\n\n  const isAuthenticated = () => auth != null;\n\n  return isAuthenticated ? /*#__PURE__*/React.createElement(Redirect, {\n    to: ROUTES.TODOLIST,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    className: \"my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(Form, {\n    className: \"mt-4 mb-3\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Row,\n    controlId: \"formPlainTextName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"text-right\",\n    column: true,\n    sm: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, \"Username:\"), /*#__PURE__*/React.createElement(Col, {\n    sm: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Username\",\n    value: username,\n    name: \"username\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Group, {\n    as: Row,\n    controlId: \"formPlainEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"text-right\",\n    column: true,\n    sm: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(Col, {\n    sm: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"email@example.com\",\n    value: email,\n    name: \"email\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Group, {\n    as: Row,\n    controlId: \"formPlainPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"text-right\",\n    column: true,\n    sm: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(Col, {\n    sm: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    name: \"password\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Group, {\n    as: Row,\n    controlId: \"formPlainPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    className: \"text-right\",\n    column: true,\n    sm: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"Confirm Password:\"), /*#__PURE__*/React.createElement(Col, {\n    sm: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Confirm Password\",\n    value: confirmPassword,\n    name: \"confirmPassword\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    class: \"btn btn-primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, \"Register\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, \"Already have an account? Sign in\\xA0\", /*#__PURE__*/React.createElement(Link, {\n    to: ROUTES.LOGIN,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, \"here\"))));\n};\n\nexport default Register;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Register.js"],"names":["React","useState","useContext","useEffect","Button","Col","Container","Form","Row","Link","Redirect","toast","axios","UserContext","ROUTES","Register","username","contextUsername","token","setUsername","setContextUsername","setToken","inputs","setInputs","email","password","confirmPassword","auth","setAuth","handleChange","event","target","name","value","handleSubmit","preventDefault","body","post","then","response","data","catch","error","console","log","isAuthenticated","TODOLIST","LOGIN"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Register = () => {\n    const { username : contextUsername,\n            token,\n            setUsername : setContextUsername, \n            setToken } = useContext(UserContext);\n\n    // Initialise input states of form\n    const [inputs, setInputs] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\"\n    });\n\n    // Authentication states\n    const [auth, setAuth] = useState(null);\n\n    const {\n        username,\n        email,\n        password,\n        confirmPassword\n    } = inputs;\n\n    // When fields change, apply changes to input variables\n    const handleChange = event => {\n        setInputs({\n            ...inputs,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    const handleSubmit = async event => {\n        event.preventDefault();\n\n        const body = {\n            username,\n            email,\n            password,\n            confirmPassword\n        };\n\n        axios.post(\"/api/auth/register\", body)\n            .then(response => {\n                const { data } = response;\n\n                setContextUsername(data.username);\n                setToken(data.token);\n            })\n            .catch(error => {\n                toast.error(error.response.data.error);\n            });\n\n        console.log(`Form submitted by ${username}, with ${email}`);\n    };\n\n    // Authentication checks\n    useEffect(() => {\n        if (contextUsername && token) {\n            setAuth({ contextUsername, token });\n        }\n    }, [contextUsername, token]);\n\n    const isAuthenticated = () => auth != null;\n\n    return (\n        isAuthenticated ? <Redirect to={ROUTES.TODOLIST} />\n        : <div>\n            <Container className=\"my-5\">\n                <h2>Register</h2>\n                <Form className=\"mt-4 mb-3\" onSubmit={handleSubmit}>\n                    <Form.Group as={Row} controlId=\"formPlainTextName\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Username:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"text\"\n                                placeholder=\"Username\"\n                                value={username}\n                                name=\"username\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainEmail\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Email:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"email\"\n                                placeholder=\"email@example.com\"\n                                value={email}\n                                name=\"email\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"password\"\n                                placeholder=\"Password\"\n                                value={password}\n                                name=\"password\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Confirm Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control \n                                type=\"password\"\n                                placeholder=\"Confirm Password\"\n                                value={confirmPassword}\n                                name=\"confirmPassword\"\n                                onChange={handleChange}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Button class=\"btn btn-primary\" type=\"submit\">\n                        Register\n                    </Button>\n                </Form>\n                <p>\n                    Already have an account? Sign in&nbsp;\n                    <Link to={ROUTES.LOGIN}>\n                        here\n                    </Link>\n                </p>\n            </Container>\n        </div>\n    );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}