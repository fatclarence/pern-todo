{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import{Button,Col,Container,Form,Row}from\"react-bootstrap\";import{Link,Redirect}from\"react-router-dom\";import{toast}from\"react-toastify\";import axios from\"axios\";import{UserContext}from\"../utils/UserProvider\";import ROUTES from\"../routes/Routes\";var Login=function Login(){// setContextUsername will change the state in the context (received from parent/ancestor component)\nvar _useContext=useContext(UserContext),setContextUsername=_useContext.setUsername,setToken=_useContext.setToken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();body={username:username,password:password};axios.post(\"/api/auth/login\",body).then(function(response){var data=response.data;console.log(data.token);console.log(data.username);setToken(data.token);setContextUsername(data.username);toast.success(\"Welcome Back \"+data.username);}).catch(function(error){toast.error(error.response.data.error);});console.log(\"Sign in form submitted by \".concat(username));case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{className:\"my-5\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),/*#__PURE__*/React.createElement(Form,{className:\"mt-4 mb-3\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainTextName\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Username:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlainPassword\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"text-right\",column:true,sm:\"2\"},\"Password:\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}))),/*#__PURE__*/React.createElement(Button,{className:\"btn btn-success\",type:\"submit\"},\"Sign In\")),/*#__PURE__*/React.createElement(\"p\",null,\"Don't have an account? Register\\xA0\",/*#__PURE__*/React.createElement(Link,{to:ROUTES.REGISTER},\"NOW!\"))));};export default Login;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/pages/Login.js"],"names":["React","useState","useContext","useEffect","Button","Col","Container","Form","Row","Link","Redirect","toast","axios","UserContext","ROUTES","Login","setContextUsername","setUsername","setToken","username","password","setPassword","handleSubmit","event","preventDefault","body","post","then","response","data","console","log","token","success","catch","error","e","target","value","REGISTER"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\nimport { UserContext } from \"../utils/UserProvider\";\nimport ROUTES from \"../routes/Routes\";\n\nconst Login = () => {\n    // setContextUsername will change the state in the context (received from parent/ancestor component)\n    const { setUsername : setContextUsername,\n            setToken } = useContext(UserContext);\n\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const handleSubmit = async event => {\n        event.preventDefault();\n        const body = { username, password };\n        axios.post(\"/api/auth/login\", body)\n            .then(response => {\n                const { data } = response;\n                console.log(data.token);\n                console.log(data.username);\n                setToken(data.token);\n                setContextUsername(data.username);\n                toast.success(\"Welcome Back \" + data.username);\n            })\n            .catch(error => {\n                toast.error(error.response.data.error);\n            });\n\n        console.log(`Sign in form submitted by ${username}`);\n    };\n\n    return (<div>\n            <Container className=\"my-5\">\n                <h2>Login</h2>\n                <Form className=\"mt-4 mb-3\" onSubmit={handleSubmit}>\n                    <Form.Group as={Row} controlId=\"formPlainTextName\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Username:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control\n                                type=\"text\"\n                                placeholder=\"Username\"\n                                value={username}\n                                onChange={e => setUsername(e.target.value)}\n                            />\n                        </Col>\n                    </Form.Group>\n\n                    <Form.Group as={Row} controlId=\"formPlainPassword\">\n                        <Form.Label className=\"text-right\" column sm=\"2\">\n                            Password:\n                        </Form.Label>\n                        <Col sm=\"10\">\n                            <Form.Control\n                                type=\"password\"\n                                placeholder=\"Password\"\n                                value={password}\n                                onChange={e => setPassword(e.target.value)}\n                            />\n                        </Col>\n                    </Form.Group> \n\n                    <Button className=\"btn btn-success\" type=\"submit\">\n                        Sign In\n                    </Button>\n                </Form>\n                <p>\n                    Don't have an account? Register&nbsp;\n                    <Link to={ROUTES.REGISTER}>\n                        NOW!\n                    </Link>\n                </p>\n            </Container>\n        </div>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}