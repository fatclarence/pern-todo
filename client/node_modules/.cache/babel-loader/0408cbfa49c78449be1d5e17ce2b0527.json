{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clarencekoh/Desktop/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{Fragment,useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import EditTodo from\"./EditTodo\";var ListTodos=function ListTodos(_ref){var todos=_ref.todos,getTodos=_ref.getTodos,_ref$setTodos=_ref.setTodos,setTodos=_ref$setTodos===void 0?setTodos:_ref$setTodos;// State and what you are using to change the state\n// const[todos, setTodos] = useState([todos]);\n// Delete function\nvar deleteTodo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,description){var _deleteTodo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/todos/\".concat(id),{method:\"DELETE\"});case 3:_deleteTodo=_context.sent;setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));toast.warning(\"Deleted todo \\\"\"+description+\"\\\"\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function deleteTodo(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){// every refresh render, execute these functions\ngetTodos();},[todos]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table mt-5 text-center\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"Edit\"),/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,todos.map(function(todo){return/*#__PURE__*/React.createElement(\"tr\",{key:todo.todo_id},/*#__PURE__*/React.createElement(\"td\",null,todo.description),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(EditTodo,{todo:todo})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id,todo.description);}},\"Delete\")));}))));};export default ListTodos;","map":{"version":3,"sources":["/Users/clarencekoh/Desktop/pern-todo/client/src/components/ListTodos.js"],"names":["React","Fragment","useEffect","useState","toast","EditTodo","ListTodos","todos","getTodos","setTodos","deleteTodo","id","description","fetch","method","filter","todo","todo_id","warning","console","error","message","map"],"mappings":"iUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAA6D,IAAnDC,CAAAA,KAAmD,MAA1DA,KAA0D,CAAlCC,QAAkC,MAA5CA,QAA4C,oBAAxBC,QAAwB,CAAxBA,QAAwB,wBAAfA,QAAe,eAC3E;AACA;AAEA;AACA,GAAMC,CAAAA,UAAU,2FAAG,iBAAMC,EAAN,CAAUC,WAAV,wKAEcC,CAAAA,KAAK,sBAAeF,EAAf,EAAqB,CAC9CG,MAAM,CAAE,QADsC,CAArB,CAFnB,QAELJ,WAFK,eAKXD,QAAQ,CAACF,KAAK,CAACQ,MAAN,CAAa,SAAAC,IAAI,QACtBA,CAAAA,IAAI,CAACC,OAAL,GAAiBN,EADK,EAAjB,CAAD,CAAR,CAGAP,KAAK,CAACc,OAAN,CAAc,kBAAoBN,WAApB,CAAkC,IAAhD,EARW,+EAWXO,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EAXW,oEAAH,kBAAVX,CAAAA,UAAU,iDAAhB,CAeAR,SAAS,CAAC,UAAM,CACZ;AACAM,QAAQ,GACX,CAHQ,CAGN,CAACD,KAAD,CAHM,CAAT,CAKA,mBACI,oBAAC,QAAD,mBACI,6BAAO,SAAS,CAAC,wBAAjB,eACI,8CACI,2CACI,4CADJ,cAEI,qCAFJ,cAGI,uCAHJ,CADJ,CADJ,cAQI,iCACKA,KAAK,CAACe,GAAN,CAAU,SAAAN,IAAI,qBACX,0BAAI,GAAG,CAAEA,IAAI,CAACC,OAAd,eACI,8BAAKD,IAAI,CAACJ,WAAV,CADJ,cAEI,2CAAI,oBAAC,QAAD,EAAU,IAAI,CAAEI,IAAhB,EAAJ,CAFJ,cAGI,2CAAI,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,yBAAMN,CAAAA,UAAU,CAACM,IAAI,CAACC,OAAN,CAAeD,IAAI,CAACJ,WAApB,CAAhB,EAA5C,WAAJ,CAHJ,CADW,EAAd,CADL,CARJ,CADJ,CADJ,CAsBH,CA/CD,CAiDA,cAAeN,CAAAA,SAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport EditTodo from \"./EditTodo\";\n\nconst ListTodos = ({ todos: todos, getTodos: getTodos, setTodos=setTodos }) => {\n    // State and what you are using to change the state\n    // const[todos, setTodos] = useState([todos]);\n\n    // Delete function\n    const deleteTodo = async(id, description) => {\n        try {\n            const deleteTodo = await fetch(`/api/todos/${id}`, {\n                 method: \"DELETE\"\n            });\n            setTodos(todos.filter(todo => \n                todo.todo_id !== id\n            ));\n            toast.warning(\"Deleted todo \\\"\" + description + \"\\\"\");\n\n        } catch(err) {\n            console.error(err.message);\n        }\n    }\n\n    useEffect(() => {\n        // every refresh render, execute these functions\n        getTodos();\n    }, [todos]);\n    \n    return (\n        <Fragment>\n            <table className=\"table mt-5 text-center\">\n                <thead>\n                    <tr>\n                        <th>Description</th>\n                        <th>Edit</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {todos.map(todo => (\n                        <tr key={todo.todo_id}>\n                            <td>{todo.description}</td>\n                            <td><EditTodo todo={todo} /></td>\n                            <td><button className=\"btn btn-danger\" onClick={() => deleteTodo(todo.todo_id, todo.description)}>Delete</button></td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </Fragment>\n    );\n}\n\nexport default ListTodos;"]},"metadata":{},"sourceType":"module"}