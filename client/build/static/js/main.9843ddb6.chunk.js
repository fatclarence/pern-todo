(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,a){e.exports=a(77)},48:function(e,t,a){},49:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=(a(48),a(49),a(27),a(50),a(7)),s=Object(n.createContext)({});var m=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(null),u=Object(l.a)(m,2),i=u[0],d=u[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("token");console.log("Current username: "+e),console.log("Current token: "+t),c(e),d(t)}),[]),r.a.createElement(s.Provider,{value:{username:o,token:i,setUsername:function(e){c(e),e?(console.log("USERCONTEXT: "+e),localStorage.setItem("username",e)):localStorage.removeItem("username")},setToken:function(e){d(e),e?(console.log("USERCONTEXT: "+e),localStorage.setItem("token",e)):localStorage.removeItem("token",e)}}},e.children)},u=a(16),i=a(5),d=a(10),p=a(8),E=a.n(p),f=a(6),b=a.n(f),h=a(13),v=a(19),g=a(23),O=a(80),N=a(82),w=a(81),x=a(39),j=a(83),y=a(20),k=a.n(y),C=function(){var e=Object(n.useContext)(s),t=e.setUsername,a=e.setToken,o=Object(n.useState)({username:"",email:"",password:"",confirmPassword:""}),c=Object(l.a)(o,2),m=c[0],i=c[1],p=m.username,f=m.email,y=m.password,C=m.confirmPassword,S=function(e){i(Object(g.a)(Object(g.a)({},m),{},Object(v.a)({},e.target.name,e.target.value)))},T=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r={username:p,email:f,password:y,confirmPassword:C},k.a.post("/api/auth/register",r).then((function(e){var n=e.data;t(n.username),a(n.token),d.b.success("Thanks for joining us "+n.username+"!")})).catch((function(e){d.b.error(e.response.data.error)})),console.log("Form submitted by ".concat(p,", with ").concat(f));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(O.a,{className:"my-5"},r.a.createElement("h2",null,"Register"),r.a.createElement(N.a,{className:"mt-4 mb-3",onSubmit:T},r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainTextName"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Username:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",placeholder:"Username",value:p,name:"username",onChange:S}))),r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainEmail"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Email:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"email",placeholder:"email@example.com",value:f,name:"email",onChange:S}))),r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainPassword"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Password:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"password",placeholder:"Password",value:y,name:"password",onChange:S}))),r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainPassword"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Confirm Password:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"password",placeholder:"Confirm Password",value:C,name:"confirmPassword",onChange:S}))),r.a.createElement(j.a,{className:"btn btn-primary",type:"submit"},"Register")),r.a.createElement("p",null,"Already have an account? Sign in\xa0",r.a.createElement(u.b,{to:E.a.LOGIN},"here"))))},S=function(){var e=Object(n.useContext)(s),t=e.setUsername,a=e.setToken,o=Object(n.useState)(""),c=Object(l.a)(o,2),m=c[0],i=c[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),v=f[0],g=f[1],y=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r={username:m,password:v},k.a.post("/api/auth/login",r).then((function(e){var n=e.data;console.log(n.token),console.log(n.username),a(n.token),t(n.username),d.b.success("Welcome Back "+n.username)})).catch((function(e){d.b.error(e.response.data.error)})),console.log("Sign in form submitted by ".concat(m));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(O.a,{className:"my-5"},r.a.createElement("h2",null,"Login"),r.a.createElement(N.a,{className:"mt-4 mb-3",onSubmit:y},r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainTextName"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Username:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",placeholder:"Username",value:m,onChange:function(e){return i(e.target.value)}}))),r.a.createElement(N.a.Group,{as:w.a,controlId:"formPlainPassword"},r.a.createElement(N.a.Label,{className:"text-right",column:!0,sm:"2"},"Password:"),r.a.createElement(x.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"password",placeholder:"Password",value:v,onChange:function(e){return g(e.target.value)}}))),r.a.createElement(j.a,{className:"btn btn-success",type:"submit"},"Sign In")),r.a.createElement("p",null,"Don't have an account? Register\xa0",r.a.createElement(u.b,{to:E.a.REGISTER},"NOW!"))))},T=a(41),I=function(e){var t=e.path,a=e.component,o=Object(T.a)(e,["path","component"]),c=Object(n.useContext)(s),l=c.username,m=c.token;return r.a.createElement(i.b,Object.assign({},o,{path:t,render:function(e){return null==l||null==m?r.a.createElement(a,e):r.a.createElement(i.a,{to:E.a.TODOLIST})}}))},P=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],o=t[1],c=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={description:a},e.next=5,fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:e.sent,d.b.success("Successfully added to your todo list!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0.message),d.b.error("There seems to be a problem here, do let Clarence know:)");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center mt-5"},"Input Todo"),r.a.createElement("form",{className:"d-flex mt-5",onSubmit:c},r.a.createElement("input",{type:"text",className:"form-control",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{className:"btn btn-success"},"Add")))},L=function(e){var t=e.todo,a=Object(n.useState)(t.description),o=Object(l.a)(a,2),c=o[0],s=o[1],m=function(){var e=Object(h.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={description:c},e.next=5,fetch("/api/todos/".concat(t.todo_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:e.sent,window.location="/",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-warning","data-toggle":"modal","data-target":"#id".concat(t.todo_id)},"Edit"),r.a.createElement("div",{className:"modal",id:"id".concat(t.todo_id),onClick:function(){return s(t.description)}},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Edit Todo"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return s(t.description)}},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("input",{type:"text",className:"form-control",value:c,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal",onClick:function(e){return m(e)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return s(t.description)}},"Close"))))))},D=function(e){var t=e.todos,a=e.getTodos,o=e.setTodos,c=void 0===o?c:o,l=function(){var e=Object(h.a)(b.a.mark((function e(a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/todos/".concat(a),{method:"DELETE"});case 3:e.sent,c(t.filter((function(e){return e.todo_id!==a}))),d.b.warning('Deleted todo "'+n+'"'),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a()}),[t]),r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table mt-5 text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Edit"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.todo_id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,r.a.createElement(L,{todo:e})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return l(e.todo_id,e.description)}},"Delete")))})))))},G=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],c=function(){var e=Object(h.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/todos");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,o(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(P,null),r.a.createElement(D,{todos:a,getTodos:c,setTodos:o}))},R=function(e){var t=Object(n.useContext)(s),a=t.username,o=t.token;return r.a.createElement(i.b,Object.assign({},e,{render:function(e){return null!=a&&null!=o?r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:E.a.TODOLIST},r.a.createElement(G,null))):r.a.createElement(i.a,{to:E.a.LOGIN})}}))},U=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,null),r.a.createElement(u.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(i.a,{to:E.a.LOGIN})}}),r.a.createElement(I,{path:E.a.REGISTER,exact:!0,component:C}),r.a.createElement(I,{path:E.a.LOGIN,exact:!0,component:S}),r.a.createElement(R,{path:E.a.TODOLIST}))))};var _=function(){return r.a.createElement("div",null,r.a.createElement(m,null,r.a.createElement(U,null)))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))},8:function(e,t){e.exports={LOGIN:"/login",REGISTER:"/register",TODOLIST:"/todo-list",HOME:"/"}}},[[43,1,2]]]);
//# sourceMappingURL=main.9843ddb6.chunk.js.map